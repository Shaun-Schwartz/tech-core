
<% if @markers %>
  <div style='width: 100%;'>
    <div id="myMap" style='width: 100%; height: 400px;'></div>
  </div>

  <script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'myMap'}}, function(){
      markers = handler.addMarkers(<%= raw @markers.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      handler.getMap().setZoom(14);
    });
  </script>
<% end %>


<%= render 'search_forms' %>
<div class="row justify-content-center">
  <% @organizations.each do |organization| %>
    <div class="col-8 col-sm-6 col-md-4 col-lg-3">
      <div class="card sm-6 mb-4 lg-3 box-shadow about">
        <% if organization.logo.present? %>
          <%= image_tag(organization.logo, class:"img-responsive center-block") %>
        <% else %>
          <%= image_tag('placeholder.png', class:"img-responsive center-block") %>
        <% end %>
        <div class="card-body">
          <!-- TODO this link_to only re-renders the page. it should link to the organization show page given the id parameter. -->


          <p class="card-title"><%= link_to organization.name,
                                            organization_path(organization) %></p>
          <p class="card-text"><%= organization.employees %> employees</p>
        </div>
      </div>
    </div>
  <% end %>
</div>
